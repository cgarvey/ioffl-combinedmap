/*
  Copyright (c) 2012-2013 IrelandOffline
*/function initialize(){var e=new google.maps.LatLng(53.5,-7.5);map=new google.maps.Map(document.getElementById("dvMap"),{center:e,zoom:7,mapTypeId:"roadmap"}),circle=new google.maps.Circle({map:map,radius:3500,strokeWeight:0,stokeOpacity:0}),crosshair=new google.maps.MarkerImage("marker.png",new google.maps.Size(10,10),new google.maps.Point(0,0),new google.maps.Point(5,5)),marker=new google.maps.Marker({icon:crosshair,map:map,position:new google.maps.LatLng(53.5,-10.5),draggable:!0,title:"Drag to your location 3.5 kms"}),circle.bindTo("center",marker,"position")}function fetchMarker(){marker.position=map.getCenter(),circle.bindTo("center",marker,"position"),marker.setMap(map)}function getWISPGroup(e){var t="'Group' = "+e.value;currentLayer=lyrWISPs,clearLayer(),lyrWISPs=null,lyrWISPs=new google.maps.FusionTablesLayer({query:{select:"Low_Res_Poly",from:"1g4848Z90Y2cd1xXcPfJzadguwP2JHzqE-Ip5dLE",where:t}}),stackLayers(),currentLayer=lyrWISPs}function getHRMap(e){switch(e.value){case"0":deleteOverlays();break;case"1":deleteOverlays(),newLayer(52.17259,51.27235,-8.3619661,-10.12707,.9,"overlays/digital-forge.png");break;case"2":deleteOverlays(),newLayer(52.744606,51.949345,-9.118652,-10.721283,.8,"overlays/kerry-broadband.png");break;case"3":deleteOverlays(),newLayer(54.52309,53.17326,-8.289186,-10.29116,.5,"overlays/westnet.png");break;case"4":deleteOverlays(),newLayer(55.462214,51.351278,-5.904817,-10.821576,1,"overlays/NBScoverage.png")}}function getGSMNetworks(){return txt="",document.getElementById("idNetVoda").checked&&(txt="'Vodafone'"),document.getElementById("idNetO2").checked&&(txt!=""&&(txt+=", "),txt+="'O2'"),document.getElementById("idNetMet").checked&&(txt!=""&&(txt+=", "),txt+="'Meteor'"),document.getElementById("idNet3").checked&&(txt!=""&&(txt+=", "),txt+="'3'"),txt}function getGSMTechnology(){return txt="",document.getElementById("idPlatGSM").checked&&(txt=" AND GSM='X'"),document.getElementById("idPlat3G").checked&&(txt+=" AND UMTS='X'"),txt}function getDSLTechnology(){return txt="",document.getElementById("idEirDSL").checked&&(txt="'y'"),document.getElementById("idEirNoDSL").checked&&(txt!=""&&(txt+=", "),txt+="'n'"),txt}function MakeQuery(){var e=getGSMNetworks();currentLayer=lyrMobile,clearLayer(),lyrMobile=null,e!=""&&(e="'Network' IN ("+e+")"+getGSMTechnology(),lyrMobile=new google.maps.FusionTablesLayer({query:{select:"Location",from:"1BUwTpYWcd3McCpjHpbOZvuspJWu4pAIGUuTW0Pw",where:e}})),stackLayers(),currentLayer=lyrMobile}function compQuery(){currentLayer=lyrDSL,clearLayer(),lyrDSL=null;var e=getDSLTechnology();e!=""&&(e="'Enabled' IN( "+e+" )",lyrDSL=new google.maps.FusionTablesLayer({query:{select:"Location",from:"1xvObXKsemrYIBklXMSoRfQ17sfl9W-6JSua0PGQ",where:e}})),stackLayers(),currentLayer=lyrDSL}function overlay(e,t,n){currentLayer=e,clearLayer(),lyrUnderlays=new google.maps.FusionTablesLayer(t,{query:n}),stackLayers(),currentLayer=e}function displayOverlay(e,t,n,r,i){currentLayer=lyrUnderlays,clearLayer(),lyrUnderlays=null;if(e){var s="KML";i&&i!=""&&(s=i);var o="";n&&(o+=querytxt),lyrUnderlays=new google.maps.FusionTablesLayer({query:{select:s,from:t,where:r}})}stackLayers(),currentLayer=lyrUnderlays}function stackLayers(){lyrUnderlays!=null&&lyrUnderlays.setMap(map),lyrWISPs!=null&&lyrWISPs.setMap(map),lyrDSL!=null&&lyrDSL.setMap(map),lyrMobile!=null&&lyrMobile.setMap(map)}function clearAllLayers(){lyrDSL&&lyrDSL.setMap(null),lyrWISPs&&lyrWISps.setMap(null),lyrUnderlays&&lyrUnderlays.setMap(null),lyrMobile&&lyrMobile.setMap(null)}function clearLayer(){currentLayer!=null&&currentLayer.setMap(null)}function newLayer(e,t,n,r,i,s){var o=new google.maps.LatLngBounds(new google.maps.LatLng(t,r),new google.maps.LatLng(e,n)),u={opacity:i},a=new google.maps.GroundOverlay(s,o,u);wispsArray.push(a),a.setMap(map)}function checkedState(){document.getElementById("idWISPs").checked?loadGroundOverlays():clearOverlays()}function loadGroundOverlays(){newLayer(52.17259,51.27235,-8.3619661,-10.12707,.9,"overlays/digital-forge.png"),newLayer(54.52309,53.17326,-8.289186,-10.29116,.5,"overlays/westnet.png"),newLayer(52.744606,51.949345,-9.118652,-10.721283,.8,"overlays/kerry-broadband.png")}function setAllMap(e){for(var t=0;t<wispsArray.length;t++)wispsArray[t].setMap(e)}function clearOverlays(){setAllMap(null)}function showOverlays(){setAllMap(map)}function deleteOverlays(){clearOverlays(),wispsArray=[]}var currentLayer=null,lyrDSL=null,lyrUnderlays=null,lyrMobile=null,lyrWISPs=null,marker="null",circle=null,crosshair=null,wispsArray=[];